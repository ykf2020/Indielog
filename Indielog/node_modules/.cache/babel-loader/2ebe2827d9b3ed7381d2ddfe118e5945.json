{"ast":null,"code":"var _jsxFileName = \"/Users/fanyukun/Documents/react/indielog/src/pages/BlogPost/index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { getPostWithAuthorInfo, togglePostLiked } from '../../utils/firebase';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useParams } from 'react-router-dom';\nimport CommentArea from '../../components/CommentArea';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHeart } from '@fortawesome/free-solid-svg-icons';\nimport { BlogPostPageContainer, PostContainer, PostPic, PostDesc, PostTitle, PostContentWrapper, AuthorContainer, AuthorContainerTitle, AuthorImg, AuthorInfo, AuthorName, AuthorDesc, LikeButtonDiv, LikePush, LikeNumber } from './BlogPostElements.js';\nimport { setCurrentTitle } from \"../../redux/reducers/pageTitleReducer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst BlogPost = () => {\n  _s();\n\n  var _post$likedBy, _post$createdAt, _post$likedBy2;\n\n  const dispatch = useDispatch();\n  const user = useSelector(store => store.user.currentUser);\n  const {\n    postId\n  } = useParams();\n  const [post, setPost] = useState({});\n  const [authorInfo, setAuthorInfo] = useState({});\n  const isLiked = (_post$likedBy = post.likedBy) === null || _post$likedBy === void 0 ? void 0 : _post$likedBy.includes(user === null || user === void 0 ? void 0 : user.uid);\n  useEffect(() => {\n    getPostWithAuthorInfo(postId, setPost, setAuthorInfo);\n  }, []);\n  useEffect(() => {\n    dispatch(setCurrentTitle(post.title));\n    return () => {\n      dispatch(setCurrentTitle('Indielog'));\n    };\n  }, [post]);\n\n  function toggleLiked() {\n    if (!user) {\n      alert('請先登入會員才能按讚～');\n      return;\n    }\n\n    togglePostLiked(isLiked, postId, user.uid);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(BlogPostPageContainer, {\n      children: [/*#__PURE__*/_jsxDEV(PostContainer, {\n        children: [/*#__PURE__*/_jsxDEV(PostTitle, {\n          children: post.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(PostPic, {\n          src: post.imageUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(PostDesc, {\n          children: [(_post$createdAt = post.createdAt) === null || _post$createdAt === void 0 ? void 0 : _post$createdAt.toDate().toLocaleString([], {\n            year: 'numeric',\n            month: 'numeric',\n            day: 'numeric'\n          }), \" | \", post.topic]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(PostContentWrapper, {\n          dangerouslySetInnerHTML: {\n            __html: post.content\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(LikePush, {\n        children: \"\\u89BA\\u5F97\\u6587\\u7AE0\\u4E0D\\u932F\\u55CE\\uFF1F\\u6309\\u500B\\u8B9A\\u5427\\uFF01\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(LikeButtonDiv, {\n        isLiked: isLiked,\n        onClick: toggleLiked,\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faHeart\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(LikeNumber, {\n          children: (_post$likedBy2 = post.likedBy) === null || _post$likedBy2 === void 0 ? void 0 : _post$likedBy2.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(AuthorContainer, {\n        children: [/*#__PURE__*/_jsxDEV(AuthorContainerTitle, {\n          children: \"\\u95DC\\u65BC\\u4F5C\\u8005\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(AuthorImg, {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: (authorInfo === null || authorInfo === void 0 ? void 0 : authorInfo.photoURL) ? authorInfo === null || authorInfo === void 0 ? void 0 : authorInfo.photoURL : '/default-user-image.png'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 20\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(AuthorInfo, {\n          children: [/*#__PURE__*/_jsxDEV(AuthorName, {\n            children: authorInfo === null || authorInfo === void 0 ? void 0 : authorInfo.displayName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(AuthorDesc, {\n            children: authorInfo === null || authorInfo === void 0 ? void 0 : authorInfo.introduction\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(CommentArea, {\n        area: 'posts',\n        id: postId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(BlogPost, \"qegeEUlayfyzHejl0UTxCAMsQHc=\", false, function () {\n  return [useDispatch, useSelector, useParams];\n});\n\n_c = BlogPost;\nexport default BlogPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"BlogPost\");","map":{"version":3,"sources":["/Users/fanyukun/Documents/react/indielog/src/pages/BlogPost/index.js"],"names":["useState","useEffect","getPostWithAuthorInfo","togglePostLiked","useSelector","useDispatch","useParams","CommentArea","FontAwesomeIcon","faHeart","BlogPostPageContainer","PostContainer","PostPic","PostDesc","PostTitle","PostContentWrapper","AuthorContainer","AuthorContainerTitle","AuthorImg","AuthorInfo","AuthorName","AuthorDesc","LikeButtonDiv","LikePush","LikeNumber","setCurrentTitle","BlogPost","dispatch","user","store","currentUser","postId","post","setPost","authorInfo","setAuthorInfo","isLiked","likedBy","includes","uid","title","toggleLiked","alert","imageUrl","createdAt","toDate","toLocaleString","year","month","day","topic","__html","content","length","photoURL","displayName","introduction"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport { getPostWithAuthorInfo, togglePostLiked } from '../../utils/firebase'\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useParams } from 'react-router-dom'\nimport CommentArea from '../../components/CommentArea'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faHeart } from '@fortawesome/free-solid-svg-icons'\nimport {\n  BlogPostPageContainer,\n  PostContainer,\n  PostPic,\n  PostDesc,\n  PostTitle,\n  PostContentWrapper,\n  AuthorContainer,\n  AuthorContainerTitle,\n  AuthorImg,\n  AuthorInfo,\n  AuthorName,\n  AuthorDesc,\n  LikeButtonDiv,\n  LikePush,\n  LikeNumber\n} from './BlogPostElements.js'\nimport { setCurrentTitle } from \"../../redux/reducers/pageTitleReducer\"\n\n\nconst BlogPost = () => {\n  const dispatch = useDispatch()\n  const user = useSelector((store) => store.user.currentUser)\n  const { postId } = useParams()\n  const [post, setPost] = useState({})\n  const [authorInfo, setAuthorInfo] = useState({})\n  const isLiked = post.likedBy?.includes(user?.uid)\n\n  useEffect(() => {\n    getPostWithAuthorInfo(postId, setPost, setAuthorInfo)\n  },[])\n\n  useEffect(() => {\n    dispatch(setCurrentTitle(post.title))\n\n    return () => {\n      dispatch(setCurrentTitle('Indielog'))\n    }\n  },[post])\n\n  function toggleLiked() {\n    if(!user) {\n      alert('請先登入會員才能按讚～')\n      return\n    }\n    togglePostLiked(isLiked, postId, user.uid)\n  }\n\n  return (\n    <>\n    <BlogPostPageContainer>\n      <PostContainer>\n      <PostTitle>{post.title}</PostTitle>\n      <PostPic src={post.imageUrl}></PostPic>\n      <PostDesc>{post.createdAt?.toDate().toLocaleString([],{year: 'numeric', month: 'numeric', day: 'numeric'})} | {post.topic}</PostDesc>\n      <PostContentWrapper dangerouslySetInnerHTML={{__html: post.content}}/>\n      </PostContainer>\n      <LikePush>覺得文章不錯嗎？按個讚吧！</LikePush>\n      <LikeButtonDiv isLiked={isLiked} onClick={toggleLiked}>\n        <FontAwesomeIcon icon={faHeart} />\n        <LikeNumber>{post.likedBy?.length}</LikeNumber>\n      </LikeButtonDiv>\n      <AuthorContainer>\n        <AuthorContainerTitle>關於作者</AuthorContainerTitle>\n        <AuthorImg><img src={authorInfo?.photoURL ? authorInfo?.photoURL : '/default-user-image.png'}/></AuthorImg>\n        <AuthorInfo>\n          <AuthorName>{authorInfo?.displayName}</AuthorName>\n          <AuthorDesc>{authorInfo?.introduction}</AuthorDesc>\n        </AuthorInfo>\n      </AuthorContainer>\n      <CommentArea area={'posts'} id={postId} />\n    </BlogPostPageContainer>\n    </>\n  )\n}\n\nexport default BlogPost\n"]},"metadata":{},"sourceType":"module"}