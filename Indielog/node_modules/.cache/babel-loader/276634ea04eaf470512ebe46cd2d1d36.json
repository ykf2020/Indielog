{"ast":null,"code":"import _slicedToArray from\"/Users/fanyukun/Documents/react/indielog/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{FaBars}from'react-icons/fa';import{Nav,NavbarContainer,NavLogo,MobileIcon,NavMenu,NavItem,NavLinks,NavBtn,NavBtnLink,NavMemberImgDiv,DropDownContainer,DropDownMain,DropDownItem,DropDownBottom,MemberDiv}from'./HeaderElements';import{useSelector}from'react-redux';import{signOut as fireSignOut}from'../../utils/firebase.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(_ref){var toggleSignPanel=_ref.toggleSignPanel,toggleSideBar=_ref.toggleSideBar;var user=useSelector(function(store){return store.user.currentUser;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpenDropDown=_useState2[0],setIsOpenDropDown=_useState2[1];var dropDownRef=useRef(null);var signOut=function signOut(){fireSignOut();setIsOpenDropDown(false);};useEffect(function(){function handleClickOutside(e){if(dropDownRef.current&&!dropDownRef.current.contains(e.target)){setIsOpenDropDown(false);}}document.addEventListener(\"mousedown\",handleClickOutside);return function(){document.removeEventListener(\"mousedown\",handleClickOutside);};},[dropDownRef]);return/*#__PURE__*/_jsx(Nav,{children:/*#__PURE__*/_jsxs(NavbarContainer,{children:[/*#__PURE__*/_jsx(NavLogo,{to:\"/\",children:\"Indielog\"}),/*#__PURE__*/_jsx(MobileIcon,{onClick:toggleSideBar,children:/*#__PURE__*/_jsx(FaBars,{})}),/*#__PURE__*/_jsxs(NavMenu,{children:[/*#__PURE__*/_jsx(NavItem,{children:/*#__PURE__*/_jsx(NavLinks,{to:\"/\",children:\"\\u807D\\u807D\\u97F3\\u6A02\"})}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#fff'},children:\" | \"}),/*#__PURE__*/_jsx(NavItem,{children:/*#__PURE__*/_jsx(NavLinks,{to:\"/blog\",children:\"\\u804A\\u804A\\u97F3\\u6A02\"})})]}),/*#__PURE__*/_jsx(NavBtn,{children:user?/*#__PURE__*/_jsxs(MemberDiv,{ref:dropDownRef,children:[/*#__PURE__*/_jsxs(DropDownContainer,{isOpenDropDown:isOpenDropDown,children:[/*#__PURE__*/_jsxs(DropDownMain,{isOpenDropDown:isOpenDropDown,children:[/*#__PURE__*/_jsx(DropDownItem,{to:\"/new-song\",children:\"\\u4E0A\\u50B3\\u97F3\\u6A02\"}),/*#__PURE__*/_jsx(DropDownItem,{to:\"/new-post\",children:\"\\u65B0\\u589E\\u6587\\u7AE0\"}),/*#__PURE__*/_jsx(DropDownItem,{to:\"/member/collections/songs\",children:\"\\u6536\\u85CF\\u5217\\u8868\"}),/*#__PURE__*/_jsx(DropDownItem,{to:\"/member/personal-info\",children:\"\\u6703\\u54E1\\u8CC7\\u6599\"})]}),/*#__PURE__*/_jsx(DropDownBottom,{isOpenDropDown:isOpenDropDown,onClick:signOut,children:\"\\u767B\\u51FA\"})]}),/*#__PURE__*/_jsx(NavMemberImgDiv,{onClick:function onClick(){return setIsOpenDropDown(!isOpenDropDown);},children:/*#__PURE__*/_jsx(\"img\",{src:user.photoURL?user.photoURL:'/default-user-image.png'})})]}):/*#__PURE__*/_jsx(NavBtnLink,{onClick:toggleSignPanel,children:\"\\u8A3B\\u518A / \\u767B\\u5165\"})})]})});};export default Header;","map":{"version":3,"sources":["/Users/fanyukun/Documents/react/indielog/src/components/Header/index.js"],"names":["React","useState","useEffect","useRef","FaBars","Nav","NavbarContainer","NavLogo","MobileIcon","NavMenu","NavItem","NavLinks","NavBtn","NavBtnLink","NavMemberImgDiv","DropDownContainer","DropDownMain","DropDownItem","DropDownBottom","MemberDiv","useSelector","signOut","fireSignOut","Header","toggleSignPanel","toggleSideBar","user","store","currentUser","isOpenDropDown","setIsOpenDropDown","dropDownRef","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","color","photoURL"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport { FaBars } from 'react-icons/fa'\nimport {\n  Nav,\n  NavbarContainer,\n  NavLogo,\n  MobileIcon,\n  NavMenu,\n  NavItem,\n  NavLinks,\n  NavBtn,\n  NavBtnLink,\n  NavMemberImgDiv,\n  DropDownContainer,\n  DropDownMain,\n  DropDownItem,\n  DropDownBottom,\n  MemberDiv\n} from './HeaderElements'\nimport { useSelector } from 'react-redux'\nimport { signOut as fireSignOut } from '../../utils/firebase.js'\n\nconst Header = ({ toggleSignPanel, toggleSideBar }) => {\n  const user = useSelector((store) => store.user.currentUser)\n  const [isOpenDropDown, setIsOpenDropDown] = useState(false)\n  const dropDownRef = useRef(null)\n  \n  const signOut = () => {\n    fireSignOut()\n    setIsOpenDropDown(false)\n  }\n\n  useEffect(() => {\n    function handleClickOutside(e) {\n      if (dropDownRef.current && !dropDownRef.current.contains(e.target)) {\n        setIsOpenDropDown(false);\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [dropDownRef]);\n  return (\n    <Nav>\n      <NavbarContainer>\n        <NavLogo to=\"/\">Indielog</NavLogo>\n        <MobileIcon onClick={toggleSideBar}>\n          <FaBars />\n        </MobileIcon>\n        <NavMenu>\n          <NavItem>\n            <NavLinks to=\"/\">聽聽音樂</NavLinks>\n          </NavItem>\n          <div style={{color: '#fff'}}> | </div>\n          <NavItem>\n            <NavLinks to=\"/blog\">聊聊音樂</NavLinks>\n          </NavItem>\n        </NavMenu>\n        <NavBtn>\n        {user ?\n          <MemberDiv ref={dropDownRef}>\n            <DropDownContainer  isOpenDropDown={isOpenDropDown}>\n              <DropDownMain isOpenDropDown={isOpenDropDown}>\n                <DropDownItem to='/new-song'>上傳音樂</DropDownItem>\n                <DropDownItem to='/new-post'>新增文章</DropDownItem>\n                <DropDownItem to='/member/collections/songs'>收藏列表</DropDownItem>\n                <DropDownItem to='/member/personal-info'>會員資料</DropDownItem>\n              </DropDownMain>\n              <DropDownBottom isOpenDropDown={isOpenDropDown} onClick={signOut}>登出</DropDownBottom>\n            </DropDownContainer>\n            <NavMemberImgDiv onClick = {() => setIsOpenDropDown(!isOpenDropDown)}>\n              <img src={user.photoURL ? user.photoURL : '/default-user-image.png'}/>\n            </NavMemberImgDiv>\n          </MemberDiv>\n          :\n          <NavBtnLink onClick={toggleSignPanel}>註冊 / 登入</NavBtnLink>\n        }\n        </NavBtn>\n      </NavbarContainer>\n    </Nav>\n  )\n}\n\nexport default Header\n"]},"metadata":{},"sourceType":"module"}