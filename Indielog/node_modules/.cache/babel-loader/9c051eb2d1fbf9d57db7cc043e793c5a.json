{"ast":null,"code":"import _slicedToArray from\"/Users/fanyukun/Documents/react/Indielog/Indielog/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{CommentsContainer,CommentAddSection,Notice,CommentAddArea,CommentInfo,CommentorImgDiv,CommentorName,CommentTextArea,CommentButtons,SubmitButton}from'./CommentAreaElements.js';import Comment from'../Comment';import{useSelector}from'react-redux';import{addNewComment,getCommentsOnSnapshot}from'../../utils/firebase.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentArea=function CommentArea(_ref){var area=_ref.area,id=_ref.id;var user=useSelector(function(store){return store.user.currentUser;});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),commentInput=_useState2[0],setCommentInput=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setComments=_useState4[1];function handleCommentInputSubmit(){addNewComment(area,id,commentInput,user.uid).then(function(){setCommentInput('');});}useEffect(function(){getCommentsOnSnapshot(area,id,setComments);},[area,id]);return/*#__PURE__*/_jsxs(CommentsContainer,{children:[/*#__PURE__*/_jsxs(CommentAddSection,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u7559\\u8A00\"}),user?/*#__PURE__*/_jsxs(CommentAddArea,{children:[/*#__PURE__*/_jsxs(CommentInfo,{children:[/*#__PURE__*/_jsx(CommentorImgDiv,{children:/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:user.photoURL?user.photoURL:'/default-user-image.png'})}),/*#__PURE__*/_jsx(CommentorName,{children:user.displayName})]}),/*#__PURE__*/_jsx(CommentTextArea,{placeholder:\"\\u9EDE\\u6B64\\u8F38\\u5165\\u7559\\u8A00...\",value:commentInput,onChange:function onChange(e){return setCommentInput(e.target.value);}}),/*#__PURE__*/_jsx(CommentButtons,{children:/*#__PURE__*/_jsx(SubmitButton,{onClick:handleCommentInputSubmit,children:\"\\u9001\\u51FA\\u7559\\u8A00\"})})]}):/*#__PURE__*/_jsxs(Notice,{children:[\"\\u8ACB\\u5148\",/*#__PURE__*/_jsx(\"span\",{children:\"\\u767B\\u5165\"}),\"\\u4EE5\\u7559\\u8A00\"]})]}),comments.map(function(comment){return/*#__PURE__*/_jsx(Comment,{currentComment:comment},comment.id);})]});};export default CommentArea;","map":{"version":3,"sources":["/Users/fanyukun/Documents/react/Indielog/Indielog/src/components/CommentArea/index.js"],"names":["useState","useEffect","CommentsContainer","CommentAddSection","Notice","CommentAddArea","CommentInfo","CommentorImgDiv","CommentorName","CommentTextArea","CommentButtons","SubmitButton","Comment","useSelector","addNewComment","getCommentsOnSnapshot","CommentArea","area","id","user","store","currentUser","commentInput","setCommentInput","comments","setComments","handleCommentInputSubmit","uid","then","photoURL","displayName","e","target","value","map","comment"],"mappings":"oIAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OACEC,iBADF,CAEEC,iBAFF,CAGEC,MAHF,CAIEC,cAJF,CAKEC,WALF,CAMEC,eANF,CAOEC,aAPF,CAQEC,eARF,CASEC,cATF,CAUEC,YAVF,KAWO,0BAXP,CAYA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,aAAT,CAAwBC,qBAAxB,KAAqD,yBAArD,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAkB,IAAfC,CAAAA,IAAe,MAAfA,IAAe,CAATC,EAAS,MAATA,EAAS,CACpC,GAAMC,CAAAA,IAAI,CAAGN,WAAW,CAAC,SAACO,KAAD,QAAWA,CAAAA,KAAK,CAACD,IAAN,CAAWE,WAAtB,EAAD,CAAxB,CACA,cAAwCrB,QAAQ,CAAC,EAAD,CAAhD,wCAAOsB,YAAP,eAAqBC,eAArB,eACA,eAAgCvB,QAAQ,CAAC,EAAD,CAAxC,yCAAOwB,QAAP,eAAiBC,WAAjB,eAEA,QAASC,CAAAA,wBAAT,EAAmC,CACjCZ,aAAa,CAACG,IAAD,CAAOC,EAAP,CAAWI,YAAX,CAAyBH,IAAI,CAACQ,GAA9B,CAAb,CAAgDC,IAAhD,CAAqD,UAAM,CACzDL,eAAe,CAAC,EAAD,CAAf,CACD,CAFD,EAGD,CAEDtB,SAAS,CAAC,UAAM,CACdc,qBAAqB,CAACE,IAAD,CAAOC,EAAP,CAAWO,WAAX,CAArB,CACD,CAFQ,CAEP,CAACR,IAAD,CAAOC,EAAP,CAFO,CAAT,CAIA,mBACE,MAAC,iBAAD,yBACE,MAAC,iBAAD,yBACE,oCADF,CAEGC,IAAI,cACH,MAAC,cAAD,yBACE,MAAC,WAAD,yBACE,KAAC,eAAD,wBAAiB,YAAK,GAAG,CAAC,EAAT,CAAY,GAAG,CAAEA,IAAI,CAACU,QAAL,CAAgBV,IAAI,CAACU,QAArB,CAAgC,yBAAjD,EAAjB,EADF,cAEE,KAAC,aAAD,WAAgBV,IAAI,CAACW,WAArB,EAFF,GADF,cAKE,KAAC,eAAD,EAAiB,WAAW,CAAC,yCAA7B,CAAyC,KAAK,CAAER,YAAhD,CAA8D,QAAQ,CAAE,kBAACS,CAAD,QAAMR,CAAAA,eAAe,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAV,CAArB,EAAxE,EALF,cAOE,KAAC,cAAD,wBACE,KAAC,YAAD,EAAc,OAAO,CAAEP,wBAAvB,sCADF,EAPF,GADG,cAaH,MAAC,MAAD,wCAAU,sCAAV,wBAfJ,GADF,CAmBGF,QAAQ,CAACU,GAAT,CAAa,SAACC,OAAD,CAAa,CACzB,mBACE,KAAC,OAAD,EAA0B,cAAc,CAAEA,OAA1C,EAAcA,OAAO,CAACjB,EAAtB,CADF,CAID,CALA,CAnBH,GADF,CA6BD,CA5CD,CA8CA,cAAeF,CAAAA,WAAf","sourcesContent":["import { useState, useEffect } from 'react'\nimport {\n  CommentsContainer,\n  CommentAddSection,\n  Notice,\n  CommentAddArea,\n  CommentInfo,\n  CommentorImgDiv,\n  CommentorName,\n  CommentTextArea,\n  CommentButtons,\n  SubmitButton,\n} from './CommentAreaElements.js'\nimport Comment from '../Comment'\nimport { useSelector } from 'react-redux'\nimport { addNewComment, getCommentsOnSnapshot } from '../../utils/firebase.js'\n\nconst CommentArea = ({ area, id }) => {\n  const user = useSelector((store) => store.user.currentUser)\n  const [commentInput, setCommentInput] = useState('')\n  const [comments, setComments] = useState([])\n\n  function handleCommentInputSubmit(){\n    addNewComment(area, id, commentInput, user.uid).then(() => {\n      setCommentInput('')\n    })\n  }\n\n  useEffect(() => {\n    getCommentsOnSnapshot(area, id, setComments)\n  },[area, id])\n\n  return (\n    <CommentsContainer>\n      <CommentAddSection>\n        <h3>留言</h3>\n        {user ?\n          <CommentAddArea>\n            <CommentInfo>\n              <CommentorImgDiv><img alt='' src={user.photoURL ? user.photoURL : '/default-user-image.png'}/></CommentorImgDiv>\n              <CommentorName>{user.displayName}</CommentorName>\n            </CommentInfo>\n            <CommentTextArea placeholder='點此輸入留言...' value={commentInput} onChange={(e)=> setCommentInput(e.target.value)}>\n            </CommentTextArea>\n            <CommentButtons>\n              <SubmitButton onClick={handleCommentInputSubmit}>送出留言</SubmitButton>\n            </CommentButtons>\n          </CommentAddArea>\n          :\n          <Notice>請先<span>登入</span>以留言</Notice>\n        }\n      </CommentAddSection>\n      {comments.map((comment) => {\n        return (\n          <Comment key={comment.id} currentComment={comment}>\n          </Comment>\n        )\n      })}\n\n    </CommentsContainer>\n  )\n}\n\nexport default CommentArea\n"]},"metadata":{},"sourceType":"module"}