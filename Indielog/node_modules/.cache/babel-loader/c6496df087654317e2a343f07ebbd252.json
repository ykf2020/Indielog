{"ast":null,"code":"var _jsxFileName = \"/Users/fanyukun/Documents/react/Indielog/src/components/CommentArea/index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { CommentsContainer, CommentAddSection, Notice, CommentAddArea, CommentInfo, CommentorImgDiv, CommentorName, CommentTextArea, CommentButtons, SubmitButton } from './CommentAreaElements.js';\nimport Comment from '../Comment';\nimport { useSelector } from 'react-redux';\nimport { addNewComment, getCommentsOnSnapshot } from '../../utils/firebase.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CommentArea = ({\n  area,\n  id\n}) => {\n  _s();\n\n  const user = useSelector(store => store.user.currentUser);\n  const [commentInput, setCommentInput] = useState('');\n  const [comments, setComments] = useState([]);\n\n  function handleCommentInputSubmit() {\n    addNewComment(area, id, commentInput, user.uid).then(() => {\n      setCommentInput('');\n    });\n  }\n\n  useEffect(() => {\n    getCommentsOnSnapshot(area, id, setComments);\n  }, [area, id]);\n  return /*#__PURE__*/_jsxDEV(CommentsContainer, {\n    children: [/*#__PURE__*/_jsxDEV(CommentAddSection, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u7559\\u8A00\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), user ? /*#__PURE__*/_jsxDEV(CommentAddArea, {\n        children: [/*#__PURE__*/_jsxDEV(CommentInfo, {\n          children: [/*#__PURE__*/_jsxDEV(CommentorImgDiv, {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: \"\",\n              src: user.photoURL ? user.photoURL : '/default-user-image.png'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CommentorName, {\n            children: user.displayName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CommentTextArea, {\n          placeholder: \"\\u9EDE\\u6B64\\u8F38\\u5165\\u7559\\u8A00...\",\n          value: commentInput,\n          onChange: e => setCommentInput(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CommentButtons, {\n          children: /*#__PURE__*/_jsxDEV(SubmitButton, {\n            onClick: handleCommentInputSubmit,\n            children: \"\\u9001\\u51FA\\u7559\\u8A00\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Notice, {\n        children: [\"\\u8ACB\\u5148\", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u767B\\u5165\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this), \"\\u4EE5\\u7559\\u8A00\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), comments.map(comment => {\n      return /*#__PURE__*/_jsxDEV(Comment, {\n        currentComment: comment\n      }, comment.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CommentArea, \"tTMrVe0SpIz/X1l1w4RU5WU1iLk=\", false, function () {\n  return [useSelector];\n});\n\n_c = CommentArea;\nexport default CommentArea;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentArea\");","map":{"version":3,"sources":["/Users/fanyukun/Documents/react/Indielog/src/components/CommentArea/index.js"],"names":["useState","useEffect","CommentsContainer","CommentAddSection","Notice","CommentAddArea","CommentInfo","CommentorImgDiv","CommentorName","CommentTextArea","CommentButtons","SubmitButton","Comment","useSelector","addNewComment","getCommentsOnSnapshot","CommentArea","area","id","user","store","currentUser","commentInput","setCommentInput","comments","setComments","handleCommentInputSubmit","uid","then","photoURL","displayName","e","target","value","map","comment"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SACEC,iBADF,EAEEC,iBAFF,EAGEC,MAHF,EAIEC,cAJF,EAKEC,WALF,EAMEC,eANF,EAOEC,aAPF,EAQEC,eARF,EASEC,cATF,EAUEC,YAVF,QAWO,0BAXP;AAYA,OAAOC,OAAP,MAAoB,YAApB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,aAAT,EAAwBC,qBAAxB,QAAqD,yBAArD;;;AAEA,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAD,KAAkB;AAAA;;AACpC,QAAMC,IAAI,GAAGN,WAAW,CAAEO,KAAD,IAAWA,KAAK,CAACD,IAAN,CAAWE,WAAvB,CAAxB;AACA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCvB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACwB,QAAD,EAAWC,WAAX,IAA0BzB,QAAQ,CAAC,EAAD,CAAxC;;AAEA,WAAS0B,wBAAT,GAAmC;AACjCZ,IAAAA,aAAa,CAACG,IAAD,EAAOC,EAAP,EAAWI,YAAX,EAAyBH,IAAI,CAACQ,GAA9B,CAAb,CAAgDC,IAAhD,CAAqD,MAAM;AACzDL,MAAAA,eAAe,CAAC,EAAD,CAAf;AACD,KAFD;AAGD;;AAEDtB,EAAAA,SAAS,CAAC,MAAM;AACdc,IAAAA,qBAAqB,CAACE,IAAD,EAAOC,EAAP,EAAWO,WAAX,CAArB;AACD,GAFQ,EAEP,CAACR,IAAD,EAAOC,EAAP,CAFO,CAAT;AAIA,sBACE,QAAC,iBAAD;AAAA,4BACE,QAAC,iBAAD;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEGC,IAAI,gBACH,QAAC,cAAD;AAAA,gCACE,QAAC,WAAD;AAAA,kCACE,QAAC,eAAD;AAAA,mCAAiB;AAAK,cAAA,GAAG,EAAC,EAAT;AAAY,cAAA,GAAG,EAAEA,IAAI,CAACU,QAAL,GAAgBV,IAAI,CAACU,QAArB,GAAgC;AAAjD;AAAA;AAAA;AAAA;AAAA;AAAjB;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,aAAD;AAAA,sBAAgBV,IAAI,CAACW;AAArB;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAKE,QAAC,eAAD;AAAiB,UAAA,WAAW,EAAC,yCAA7B;AAAyC,UAAA,KAAK,EAAER,YAAhD;AAA8D,UAAA,QAAQ,EAAGS,CAAD,IAAMR,eAAe,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAV;AAA7F;AAAA;AAAA;AAAA;AAAA,gBALF,eAOE,QAAC,cAAD;AAAA,iCACE,QAAC,YAAD;AAAc,YAAA,OAAO,EAAEP,wBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,cADG,gBAaH,QAAC,MAAD;AAAA,gDAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAV;AAAA;AAAA;AAAA;AAAA;AAAA,cAfJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAmBGF,QAAQ,CAACU,GAAT,CAAcC,OAAD,IAAa;AACzB,0BACE,QAAC,OAAD;AAA0B,QAAA,cAAc,EAAEA;AAA1C,SAAcA,OAAO,CAACjB,EAAtB;AAAA;AAAA;AAAA;AAAA,cADF;AAID,KALA,CAnBH;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA6BD,CA5CD;;GAAMF,W;UACSH,W;;;KADTG,W;AA8CN,eAAeA,WAAf","sourcesContent":["import { useState, useEffect } from 'react'\nimport {\n  CommentsContainer,\n  CommentAddSection,\n  Notice,\n  CommentAddArea,\n  CommentInfo,\n  CommentorImgDiv,\n  CommentorName,\n  CommentTextArea,\n  CommentButtons,\n  SubmitButton,\n} from './CommentAreaElements.js'\nimport Comment from '../Comment'\nimport { useSelector } from 'react-redux'\nimport { addNewComment, getCommentsOnSnapshot } from '../../utils/firebase.js'\n\nconst CommentArea = ({ area, id }) => {\n  const user = useSelector((store) => store.user.currentUser)\n  const [commentInput, setCommentInput] = useState('')\n  const [comments, setComments] = useState([])\n\n  function handleCommentInputSubmit(){\n    addNewComment(area, id, commentInput, user.uid).then(() => {\n      setCommentInput('')\n    })\n  }\n\n  useEffect(() => {\n    getCommentsOnSnapshot(area, id, setComments)\n  },[area, id])\n\n  return (\n    <CommentsContainer>\n      <CommentAddSection>\n        <h3>留言</h3>\n        {user ?\n          <CommentAddArea>\n            <CommentInfo>\n              <CommentorImgDiv><img alt='' src={user.photoURL ? user.photoURL : '/default-user-image.png'}/></CommentorImgDiv>\n              <CommentorName>{user.displayName}</CommentorName>\n            </CommentInfo>\n            <CommentTextArea placeholder='點此輸入留言...' value={commentInput} onChange={(e)=> setCommentInput(e.target.value)}>\n            </CommentTextArea>\n            <CommentButtons>\n              <SubmitButton onClick={handleCommentInputSubmit}>送出留言</SubmitButton>\n            </CommentButtons>\n          </CommentAddArea>\n          :\n          <Notice>請先<span>登入</span>以留言</Notice>\n        }\n      </CommentAddSection>\n      {comments.map((comment) => {\n        return (\n          <Comment key={comment.id} currentComment={comment}>\n          </Comment>\n        )\n      })}\n\n    </CommentsContainer>\n  )\n}\n\nexport default CommentArea\n"]},"metadata":{},"sourceType":"module"}